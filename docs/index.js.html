<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WASMWindows: Source: index.js</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import * as Typings from 'https:cdn.jsdelivr.net/npm/typings.js';
export const
  /**
   * @namespace
   * @name JSWindows
   */
  JSWindows = {},
  /**
   * @namespace
   * @name WASMWindows
   */
  WASMWindows = {};

// JSWindows //
/**
 * Something that can be closed.
 * @interface JSWindows#CloseableWindow
 */
/**
 * Close the thing.
 * @function
 * @name JSWindows#CloseableWindow#close
 * @returns {void}
 */
/**
 * Whether it is closed
 * @property {boolean} closed
 * @name JSWindows#CloseableWindow#closed
 * @type {boolean}
 * @readonly
 */
/**
 * Something that can be used to open a window.
 * @interface
 * @name JSWindows#WindowInstantiator
 */
JSWindows.WindowInstantiator = Object.freeze(class {
  /**
   * Open a window.
   * @function
   * @name JSWindows#WindowInstantiator#open
   * @returns {CloseableWindow} The newly created window
   * @param {Document} content The HTML content of the window as an HTML/XML Document object
   */
  open(content) {
    throw new Error("Not implemented in interface");
  }
  /**
   * @private
   * @type {string}
   */
  static get __is() {
    return "WindowInstantiator"
  }
}),
/**
 * A [WindowInstantiator]{@link JSWindows#WindowInstantiator} that uses window.open().
 * @class
 * @name JSWindows#WindowOpenInstantiator
 * @implements {WindowInstantiator}
 */
JSWindows.WindowOpenInstantiator = Object.freeze(class extends JSWindows.WindowInstantiator {
  open(content) {
    /**@type {Blob} */
    const blob = new Blob(['&lt;!doctype html>&lt;html>', content.documentElement.innerHTML, '&lt;/html>'], {type: "text/html"});
    const url = URL.createObjectURL(blob);
    return window.open(url, "_blank", "resizable, menubar=no, location=no, toolbar=no, status=no");
  }
}),
/**
 * A window that you can open.
 * Note (important): This uses [Typings.js]{@link https://npmjs.com/package/typings.js}, so you MUST pass the type parameters at runtime. The syntax is:
 * &lt;code>new (JSWindows.Window(TInst))(title, initBody)&lt;/code>
 * @class
 * @template TInst The type of WindowInstantiator to use.
 * @name JSWindows#Window(TInst)
 * @param {WindowInstantiator} TInst The type of WindowInstantiator to use (a type that implements WindowInstantiator)
 * @property {string} title
 * @property {string} body
 * @property {Document} document The HTML document in the window.
 * @param {string} title The title of the window.
 * @param {string} initBody The initial content of the window.
 */
JSWindows.Window = Typings.createGenericClass(['TInst'], (tArgs) => class {
  constructor(title, initBody = '') {
    if (!('__is' in tArgs.TInst &amp;&amp; tArgs.TInst.__is == "WindowInstantiator")) {
      delete this; // Self-Destruct
      throw new TypeError('TInst must implement WindowInstantiator');
    }
    // All's well
    this._title = title;
    this.document = document.implementation.createHTMLDocument(title);
    this.document.body.innerHTML = initBody;
  }
  get title() {
    return this._title;
  }
  set title(newVal) {
    this._title = newVal;
    this.document.title = newVal;
  }
  get body() {
    return this.document.body.innerHTML;
  }
  set body(newHTML) {
    this.document.body.innerHTML = newHTML;
  }
  /**
   * Open the window.
   * @function
   * @name JSWindows#Window(TInst)#open
   */
  open() {
    let inst = new tArgs.TInst();
    /**
     * @type {CloseableWindow}
     */
    this._ref = inst.open(this.document);
  }
  /**
   * Close the window.
   * @function
   * @name JSWindows#Window(TInst)#close
   */
  close() {
    ('_ref' in this &amp;&amp; !this._ref.closed)? this._ref.close() : null;
  }
});
/**
   * A version of Window used to just view files.
   * Note: You need to call {@link JSWindows#Window#FileViewer(TInst)#load} to actually load a resource
   * @class
   * @name JSWindows#Window#FileViewer(TInst)
   * @extends {Window(TInst)}
   * @param {string} title The title of the window.
   */
JSWindows.Window.FileViewer = Typings.createGenericClass(["TInst"], (tArgs) => class extends JSWindows.Window(tArgs.TInst) {
    constructor(title) {
      super(title, `
&lt;pre>Loading...&lt;/pre>
      `);
    }

    /**
     * Loads a resource asynchronously into the window.
     * @function
     * @name JSWindows#Window#FileViewer(TInst)#load
     * @returns {Promise&lt;void>}
     * @param {string} url The URL of the resource to show
     */
    async load(url) {
      this.body = `
&lt;pre>${await (await fetch(url)).text()}&lt;/pre>
      `;
    }
  });
Object.freeze(JSWindows.Window);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="JSWindows.html">JSWindows</a></li><li><a href="WASMWindows.html">WASMWindows</a></li></ul><h3>Classes</h3><ul><li><a href="JSWindows_Window_FileViewer.html">JSWindows#Window#FileViewer(TInst)</a></li><li><a href="JSWindows_Window.html">JSWindows#Window(TInst)</a></li><li><a href="JSWindows_WindowOpenInstantiator.html">JSWindows#WindowOpenInstantiator</a></li></ul><h3>Interfaces</h3><ul><li><a href="JSWindows_CloseableWindow.html">JSWindows#CloseableWindow</a></li><li><a href="JSWindows_WindowInstantiator.html">JSWindows#WindowInstantiator</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Jan 01 2020 20:36:02 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
